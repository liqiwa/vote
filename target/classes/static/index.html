<!-- 文件路径 src/main/resources/static/index.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hobby Voting System</title>
    <link rel="stylesheet" href="css/style.css">
    <title>爱好投票系统</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>
<body>
<!-- 内容和投票按钮 -->

<h1>选择你的爱好</h1>
<div id="hobbies"></div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    $(document).ready(function() {
        $.ajax({
            url: "/hobbies", // 确保这个URL与你的后端API匹配
            type: "GET",
            success: function(data) {
                var hobbiesContainer = $("#hobbies");
                hobbiesContainer.empty(); // 清空容器中现有的内容
                data.forEach(function(hobby) {
                    hobbiesContainer.append(
                        "<p>" + hobby.name + " - Votes: " + hobby.votes +
                        " <button onclick='voteForHobby(" + hobby.id + ")'>Vote</button></p>"
                    );
                });
            },
            error: function(xhr, status, error) {
                console.log("Error: " + error);
                console.log("Status: " + status);
                console.dir(xhr);
            }
        });
    });

    function voteForHobby(id) {
        $.post("/hobbies/" + id + "/vote", function() {
            window.location.reload(); // 重新加载页面以更新投票计数
        }).fail(function(xhr, status, error) {
            // 处理错误情况
            console.log("Error: " + error);
        });
    }
</script>


<script src="js/app.js"></script>
</body>
</html>
